---
name: plan
description: "指定された機能をどのように実装するかを計画します。これはSpec-Driven Developmentライフサイクルの第2ステップです。"
---

指定された機能をどのように実装するかを計画します。

これはSpec-Driven Developmentライフサイクルの第2ステップです。

引数として提供された実装詳細に基づいて、以下のことを行います:

1. リポジトリルートから `scripts/setup-plan.sh --json` を実行し、FEATURE_SPEC, IMPL_PLAN, SPECS_DIR, BRANCH の JSON を解析します。すべての将来のファイルパスは絶対パスでなければなりません。
2. 機能仕様を読み取り、分析して理解します:
   - 機能要件とユーザーストーリー
   - 機能要件と非機能要件
   - 成功基準と受け入れ基準
   - 言及された技術的制約または依存関係

3. `/memory/constitution.md` の憲法を読み取り、憲法要件を理解します。

4. 実装計画テンプレートを実行します:
   - `/templates/plan-template.md` をロード (すでに IMPL_PLAN パスにコピー済み)
   - 入力パスを FEATURE_SPEC に設定
   - 実行フロー (メイン) 関数ステップ 1-10 を実行
   - テンプレートは自己完結型で実行可能
   - 指定されたエラーハンドリングとゲートチェックに従う
   - $SPECS_DIR でアーティファクト生成をテンプレートにガイドさせる:
     * フェーズ 0 は research.md を生成
     * フェーズ 1 は data-model.md, contracts/, quickstart.md を生成
     * フェーズ 2 は tasks.md を生成
   - 引数から提供されたユーザーの詳細を技術的コンテキストに組み込む: {ARGS}
   - 各フェーズを完了するにつれて進捗追跡を更新

5. 実行が完了したことを確認:
   - 進捗追跡がすべてのフェーズが完了していることを確認
   - すべての必要なアーティファクトが生成されたことを確認
   - 実行に ERROR 状態がないことを確認

6. ブランチ名、ファイルパス、生成されたアーティファクトとともに結果を報告します。

パス問題を避けるため、すべてのファイル操作でリポジトリルートからの絶対パスを使用します。
